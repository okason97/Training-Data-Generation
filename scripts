#!/bin/bash
# nohup

# Train Generator
#python src/main.py -t -hdf5 -l -batch_stat -metrics is fid prdc -ref "valid" -data /mnt/data/datasets/rwth/ -cfg ./src/configs/RWTH/SPADE.yaml -save ./samples/RWTH/SPADE/ --is_ref_dataset --project titan-skeleton --num_workers 4 -every 500 --pose --skeleton > ./logs/RWTH/SPADE/run0.out 2> ./logs/RWTH/SPADE/run0.err
#python src/main.py -t -hdf5 -l -batch_stat -metrics is fid prdc -ref "valid" -data /mnt/sda2/datasets/rwth/ -cfg ./src/configs/RWTH/SPADE-ReACGAN.yaml -save ./samples/RWTH/SPADE-ReACGAN/ --is_ref_dataset --project titan-skeleton --num_workers 4 -every 500 --pose --skeleton > ./logs/RWTH/SPADE-ReACGAN/run0.out 2> ./logs/RWTH/SPADE-ReACGAN/run0.err
#python src/main.py -t -hdf5 -batch_stat -metrics is fid prdc -ref "valid" -data /mnt/sda2/datasets/rwth-complete/ -cfg ./src/configs/RWTH-complete/ReACGAN-ADC-DiffAug.yaml -save ./samples/RWTH-complete/ReACGAN-ADC-DiffAug/ --is_ref_dataset --project titan --num_workers 4 -every 500 --print_every 100 > ./logs/RWTH-complete/ReACGAN-ADC-DiffAug/run0.out 2> ./logs/RWTH-complete/ReACGAN-ADC-DiffAug/run0.err
python src/main.py -t -hdf5 -batch_stat -metrics is fid -ref "valid" -data /mnt/sda2/datasets/hagrid-complete/ -cfg ./src/configs/hagrid-complete/SPADE.yaml -save ./samples/hagrid-complete/SPADE/ --is_ref_dataset --project titan --num_workers 4 -every 1 --print_every 1 --pose --skeleton > ./logs/hagrid-complete/SPADE/run0.out 2> ./logs/hagrid-complete/SPADE/run0.err
#python src/main.py -t -hdf5 -l -batch_stat -metrics is fid prdc -ref "valid" -data /mnt/sda2/datasets/rwth-small/ -cfg ./src/configs/RWTH-small/ReACGAN-ADC-DiffAug-highcond.yaml -save ./samples/RWTH-small/ReACGAN-ADC-DiffAug-highcond/ --is_ref_dataset --project titan --num_workers 4 -every 500 --print_every 500 > ./logs/RWTH-small/ReACGAN-ADC-DiffAug-highcond/run0.out 2> ./logs/RWTH-small/ReACGAN-ADC-DiffAug-highcond/run0.err

# Continue training
#python src/main.py -t -hdf5 -batch_stat -metrics is fid -ref "valid" -data /mnt/sda2/datasets/hagrid-complete/ -cfg ./src/configs/hagrid-complete/SPADE.yaml -save ./samples/hagrid-complete/SPADE/ --is_ref_dataset --project titan --num_workers 4 -every 500 --print_every 100 --pose --skeleton -ckpt ./samples/hagrid-complete/SPADE/checkpoints/hagrid-complete-SPADE-train-2022_12_20_09_46_50/ > ./logs/hagrid-complete/SPADE/run0.out 2> ./logs/hagrid-complete/SPADE/run0.err
#python src/main.py -t -hdf5 -batch_stat -metrics is fid -ref "valid" -data /mnt/sda2/datasets/hagrid-complete/data/ -cfg ./src/configs/hagrid-complete/ReACGAN-ADC-DiffAug.yaml -save ./samples/hagrid-complete/ReACGAN-ADC-DiffAug/ --is_ref_dataset --project titan --num_workers 4 -every 500 --print_every 100 -ckpt ./samples/hagrid-complete/ReACGAN-ADC-DiffAug/checkpoints/hagrid-complete-ReACGAN-ADC-DiffAug-train-2022_10_28_03_00_38/ -best > ./logs/hagrid-complete/ReACGAN-ADC-DiffAug/run0.out 2> ./logs/hagrid-complete/ReACGAN-ADC-DiffAug/run0.err
#python src/main.py -t -hdf5 -l -batch_stat -metrics is fid prdc -ref "valid" -data /mnt/sda2/datasets/rwth-small/ -cfg ./src/configs/RWTH-small/ReACGAN-ADC-DiffAug-highcond.yaml -save ./samples/RWTH-small/ReACGAN-ADC-DiffAug-highcond/ --is_ref_dataset --project titan --num_workers 4 -every 500 --print_every 500  -ckpt ./samples/RWTH-small/ReACGAN-ADC-DiffAug-highcond/checkpoints/RWTH-ReACGAN-ADC-DiffAug-highcond-train-2023_02_07_11_40_17/ -best > ./logs/RWTH-small/ReACGAN-ADC-DiffAug-highcond/run0.out 2> ./logs/RWTH-small/ReACGAN-ADC-DiffAug-highcond/run0.err

# Save dataset
#python src/main.py -sd -sd_num 1000 -ref "valid" -data /mnt/sda2/datasets/hagrid-complete/data/ -cfg ./src/configs/hagrid-complete/ReACGAN-ADC-DiffAug.yaml -save ./samples/hagrid-complete/ReACGAN-ADC-DiffAug/ -ckpt ./samples/hagrid-complete/ReACGAN-ADC-DiffAug/checkpoints/hagrid-complete-ReACGAN-ADC-DiffAug-train-2022_10_28_03_00_38/ -best --num_workers 4 > ./logs/hagrid-complete/ReACGAN-ADC-DiffAug/sf0.out 2> ./logs/hagrid-complete/ReACGAN-ADC-DiffAug/sf0.err
#python src/main.py -sd -sd_num 1000 -ref "valid" -data /mnt/sda2/datasets/rwth -cfg ./src/configs/RWTH/SPADE.yaml -save ./samples/RWTH/SPADE-skeleton/ -ckpt ./samples/RWTH/SPADE/checkpoints/RWTH-SPADE-train-2022_08_07_22_50_49/ --num_workers 4 --pose --skeleton > ./logs/RWTH/SPADE/sf0.out 2> ./logs/RWTH/SPADE/sf0.err
#python src/main.py -sd -sd_num 1000 -ref "valid" -data /mnt/sda2/datasets/rwth -cfg ./src/configs/RWTH/SPADE-ReACGAN.yaml -save ./samples/RWTH/SPADE-ReACGAN-skeleton/ -ckpt ./samples/RWTH/SPADE-ReACGAN/checkpoints/hagrid-complete-ReACGAN-ADC-DiffAug-train-2022_10_28_03_00_38/ --num_workers 4 --truncation_factor 0.5 --pose > ./logs/RWTH/SPADE-ReACGAN/sf0.out 2> ./logs/RWTH/SPADE-ReACGAN/sf0.err
#python src/main.py -sd -sd_num 1000 -ref "valid" -data /mnt/sda2/datasets/rwth-small/ -cfg ./src/configs/RWTH-small/ReACGAN-ADC-DiffAug-highcond.yaml -save /mnt/sda2/datasets/rwth-small-ReACGAN-ADC-DiffAug-highcond/ -ckpt ./samples/RWTH-small/ReACGAN-ADC-DiffAug-highcond/checkpoints/RWTH-ReACGAN-ADC-DiffAug-highcond-train-2023_02_07_11_40_17/ -best --num_workers 4 --truncation_factor 0.5 > ./logs/RWTH-small/ReACGAN-ADC-DiffAug-highcond/sf0.out 2> ./logs/RWTH-small/ReACGAN-ADC-DiffAug-highcond/sf0.err

#mkdir -p /mnt/sda2/datasets/rwth-small-ReACGAN-ADC-DiffAug-highcond/train/
#mv /mnt/sda2/datasets/rwth-small-ReACGAN-ADC-DiffAug-highcond/samples/ReACGAN-ADC-DiffAug-highcond-train-2023_02_07_11_40_17/fake/* /mnt/sda2/datasets/rwth-small-ReACGAN-ADC-DiffAug-highcond/train/

# Train classifier
#python src/classify.py --train_mode real --dset1 /mnt/sda2/datasets/hagrid-complete/ --batch_size 128 -save ./classifier_results/real-25/hagrid-complete/ -sm --num_workers 4 --epochs 10 --n_classes 18 --dims 64
#python src/classify.py --train_mode gen --dset1 /mnt/sda2/datasets/rwth-small/ --dset2 /mnt/sda2/datasets/rwth-small-ReACGAN-ADC-DiffAug-highcond/ --batch_size 128 -save ./classifier_results/gen/rwth-small-ReACGAN-ADC-DiffAug-highcond/ --num_workers 4 --epochs 50 --n_classes 13 --dims 64
#python src/classify.py --train_mode mixgen --dset1 /mnt/sda2/datasets/rwth-small/ --dset2 /mnt/sda2/datasets/rwth-small-ReACGAN-ADC-DiffAug-highcond/ --batch_size 128 -save ./classifier_results/mixgen/rwth-small-ReACGAN-ADC-DiffAug-highcond/ --num_workers 4 --epochs 50 --n_classes 13 --dims 64
#python src/classify.py --train_mode reggen --dset1 /mnt/sda2/datasets/rwth-small/ --dset2 /mnt/sda2/datasets/rwth-small-ReACGAN-ADC-DiffAug-highcond/ --batch_size 128 -save ./classifier_results/regen/rwth-small-ReACGAN-ADC-DiffAug-highcond/ --num_workers 4 --epochs 50 --n_classes 13 --dims 64

# Filter top k samples
#python src/classify.py --top_k 300 -lm ./classifier_results/real/rwth-small/model_state_dict.pt --dset1 /mnt/sda2/datasets/rwth-small/ --dset2 /mnt/sda2/datasets/rwth-small-ReACGAN-ADC-DiffAug-highcond/ --batch_size 128 -save ./classifier_results/real/rwth-small/rwth-small-ReACGAN-ADC-DiffAug-highcond/ --num_workers 4 --n_classes 13 --dims 64

# Train with top k samples
#python src/classify.py --train_mode gen --dset1 /mnt/sda2/datasets/rwth-small/ --dset2 ./classifier_results/real/rwth-small/rwth-small-ReACGAN-ADC-DiffAug-highcond/ --batch_size 128 -save ./classifier_results/gen/topk-rwth-small-ReACGAN-ADC-DiffAug-highcond/ --num_workers 4 --epochs 50 --n_classes 13 --dims 64
#python src/classify.py --train_mode mixgen --dset1 /mnt/sda2/datasets/rwth-small/ --dset2 ./classifier_results/real/rwth-small/rwth-small-ReACGAN-ADC-DiffAug-highcond/ --batch_size 128 -save ./classifier_results/mixgen/topk-rwth-small-ReACGAN-ADC-DiffAug-highcond/ --num_workers 4 --epochs 50 --n_classes 13 --dims 64
#python src/classify.py --train_mode reggen --dset1 /mnt/sda2/datasets/rwth-small/ --dset2 ./classifier_results/real/rwth-small/rwth-small-ReACGAN-ADC-DiffAug-highcond/ --batch_size 128 -save ./classifier_results/regen/topk-rwth-small-ReACGAN-ADC-DiffAug-highcond/ --num_workers 4 --epochs 50 --n_classes 13 --dims 64

#Train reduced
#echo "--hagrid 100--"
#python src/classify.py --train_mode real --dset1 /mnt/sda2/datasets/hagrid-complete/ --batch_size 10 -save ./classifier_results/real-100/hagrid-complete/ -sm --num_workers 4 --epochs 50 --n_classes 18 --dims 64 --dset_used 100 --val_size 0.025
#echo "--hagrid 50--"
#python src/classify.py --train_mode real --dset1 /mnt/sda2/datasets/hagrid-complete/ --batch_size 10 -save ./classifier_results/real-50/hagrid-complete/ -sm --num_workers 4 --epochs 50 --n_classes 18 --dims 64 --dset_used 50 --val_size 0.025
#echo "--hagrid 20--"
#python src/classify.py --train_mode real --dset1 /mnt/sda2/datasets/hagrid-complete/ --batch_size 10 -save ./classifier_results/real-20/hagrid-complete/ -sm --num_workers 4 --epochs 50 --n_classes 18 --dims 64 --dset_used 20 --val_size 0.025
#python src/classify.py --train_mode gen --dset1 /mnt/sda2/datasets/hagrid-complete/ --dset2 ./classifier_results/real/rwth-small/rwth-small-ReACGAN-ADC-DiffAug-highcond/ --batch_size 10 -save ./classifier_results/gen-100/topk-rwth-small-ReACGAN-ADC-DiffAug-highcond/ --num_workers 4 --epochs 50 --n_classes 13 --dims 64 --dset_used 100
#python src/classify.py --train_mode gen --dset1 /mnt/sda2/datasets/hagrid-complete/ --dset2 ./classifier_results/real/rwth-small/rwth-small-ReACGAN-ADC-DiffAug-highcond/ --batch_size 10 -save ./classifier_results/gen-50/topk-rwth-small-ReACGAN-ADC-DiffAug-highcond/ --num_workers 4 --epochs 50 --n_classes 13 --dims 64 --dset_used 50
#python src/classify.py --train_mode gen --dset1 /mnt/sda2/datasets/hagrid-complete/ --dset2 ./classifier_results/real/rwth-small/rwth-small-ReACGAN-ADC-DiffAug-highcond/ --batch_size 10 -save ./classifier_results/gen-20/topk-rwth-small-ReACGAN-ADC-DiffAug-highcond/ --num_workers 4 --epochs 50 --n_classes 13 --dims 64 --dset_used 20
#python src/classify.py --train_mode mixgen --dset1 /mnt/sda2/datasets/hagrid-complete/ --dset2 ./classifier_results/real/rwth-small/rwth-small-ReACGAN-ADC-DiffAug-highcond/ --batch_size 10 -save ./classifier_results/mixgen-100/topk-rwth-small-ReACGAN-ADC-DiffAug-highcond/ --num_workers 4 --epochs 50 --n_classes 13 --dims 64 --dset_used 100
#python src/classify.py --train_mode mixgen --dset1 /mnt/sda2/datasets/hagrid-complete/ --dset2 ./classifier_results/real/rwth-small/rwth-small-ReACGAN-ADC-DiffAug-highcond/ --batch_size 10 -save ./classifier_results/mixgen-50/topk-rwth-small-ReACGAN-ADC-DiffAug-highcond/ --num_workers 4 --epochs 50 --n_classes 13 --dims 64 --dset_used 50
#python src/classify.py --train_mode mixgen --dset1 /mnt/sda2/datasets/hagrid-complete/ --dset2 ./classifier_results/real/rwth-small/rwth-small-ReACGAN-ADC-DiffAug-highcond/ --batch_size 10 -save ./classifier_results/mixgen-20/topk-rwth-small-ReACGAN-ADC-DiffAug-highcond/ --num_workers 4 --epochs 50 --n_classes 13 --dims 64 --dset_used 20
#python src/classify.py --train_mode reggen --dset1 /mnt/sda2/datasets/hagrid-complete/ --dset2 ./classifier_results/real/rwth-small/rwth-small-ReACGAN-ADC-DiffAug-highcond/ --batch_size 10 -save ./classifier_results/regen-100/topk-rwth-small-ReACGAN-ADC-DiffAug-highcond/ --num_workers 4 --epochs 50 --n_classes 13 --dims 64 --dset_used 100
#python src/classify.py --train_mode reggen --dset1 /mnt/sda2/datasets/hagrid-complete/ --dset2 ./classifier_results/real/rwth-small/rwth-small-ReACGAN-ADC-DiffAug-highcond/ --batch_size 10 -save ./classifier_results/regen-50/topk-rwth-small-ReACGAN-ADC-DiffAug-highcond/ --num_workers 4 --epochs 50 --n_classes 13 --dims 64 --dset_used 50
#python src/classify.py --train_mode reggen --dset1 /mnt/sda2/datasets/hagrid-complete/ --dset2 ./classifier_results/real/rwth-small/rwth-small-ReACGAN-ADC-DiffAug-highcond/ --batch_size 10 -save ./classifier_results/regen-20/topk-rwth-small-ReACGAN-ADC-DiffAug-highcond/ --num_workers 4 --epochs 50 --n_classes 13 --dims 64 --dset_used 20

#python src/classify.py --train_mode real --dset1 /mnt/sda2/datasets/rwth-small/ --batch_size 10 -save ./classifier_results/real-100/rwth-small/ -sm --num_workers 4 --epochs 100 --n_classes 13 --dims 64 --dset_used 100
#python src/classify.py --train_mode real --dset1 /mnt/sda2/datasets/rwth-small/ --batch_size 10 -save ./classifier_results/real-50/rwth-small/ -sm --num_workers 4 --epochs 100 --n_classes 13 --dims 64 --dset_used 50
#python src/classify.py --train_mode real --dset1 /mnt/sda2/datasets/rwth-small/ --batch_size 10 -save ./classifier_results/real-20/rwth-small/ -sm --num_workers 4 --epochs 100 --n_classes 13 --dims 64 --dset_used 20
#echo "--gen rwth 100/50/20--"
#python src/classify.py --train_mode gen --dset1 /mnt/sda2/datasets/rwth-small/ --dset2 ./classifier_results/real/rwth-small/rwth-small-ReACGAN-ADC-DiffAug-highcond/ --batch_size 10 -save ./classifier_results/gen-100/topk-rwth-small-ReACGAN-ADC-DiffAug-highcond/ --num_workers 4 --epochs 50 --n_classes 13 --dims 64 --dset_used 100
#python src/classify.py --train_mode gen --dset1 /mnt/sda2/datasets/rwth-small/ --dset2 ./classifier_results/real/rwth-small/rwth-small-ReACGAN-ADC-DiffAug-highcond/ --batch_size 10 -save ./classifier_results/gen-50/topk-rwth-small-ReACGAN-ADC-DiffAug-highcond/ --num_workers 4 --epochs 50 --n_classes 13 --dims 64 --dset_used 50
#python src/classify.py --train_mode gen --dset1 /mnt/sda2/datasets/rwth-small/ --dset2 ./classifier_results/real/rwth-small/rwth-small-ReACGAN-ADC-DiffAug-highcond/ --batch_size 10 -save ./classifier_results/gen-20/topk-rwth-small-ReACGAN-ADC-DiffAug-highcond/ --num_workers 4 --epochs 50 --n_classes 13 --dims 64 --dset_used 20
#echo "--mixgen rwth 100/50/20--"
#python src/classify.py --train_mode mixgen --dset1 /mnt/sda2/datasets/rwth-small/ --dset2 ./classifier_results/real/rwth-small/rwth-small-ReACGAN-ADC-DiffAug-highcond/ --batch_size 10 -save ./classifier_results/mixgen-100/topk-rwth-small-ReACGAN-ADC-DiffAug-highcond/ --num_workers 4 --epochs 50 --n_classes 13 --dims 64 --dset_used 100
#python src/classify.py --train_mode mixgen --dset1 /mnt/sda2/datasets/rwth-small/ --dset2 ./classifier_results/real/rwth-small/rwth-small-ReACGAN-ADC-DiffAug-highcond/ --batch_size 10 -save ./classifier_results/mixgen-50/topk-rwth-small-ReACGAN-ADC-DiffAug-highcond/ --num_workers 4 --epochs 50 --n_classes 13 --dims 64 --dset_used 50
#python src/classify.py --train_mode mixgen --dset1 /mnt/sda2/datasets/rwth-small/ --dset2 ./classifier_results/real/rwth-small/rwth-small-ReACGAN-ADC-DiffAug-highcond/ --batch_size 10 -save ./classifier_results/mixgen-20/topk-rwth-small-ReACGAN-ADC-DiffAug-highcond/ --num_workers 4 --epochs 50 --n_classes 13 --dims 64 --dset_used 20
#echo "--reggen rwth 100/50/20--"
#python src/classify.py --train_mode reggen --dset1 /mnt/sda2/datasets/rwth-small/ --dset2 ./classifier_results/real/rwth-small/rwth-small-ReACGAN-ADC-DiffAug-highcond/ --batch_size 10 -save ./classifier_results/regen-100/topk-rwth-small-ReACGAN-ADC-DiffAug-highcond/ --num_workers 4 --epochs 50 --n_classes 13 --dims 64 --dset_used 100
#python src/classify.py --train_mode reggen --dset1 /mnt/sda2/datasets/rwth-small/ --dset2 ./classifier_results/real/rwth-small/rwth-small-ReACGAN-ADC-DiffAug-highcond/ --batch_size 10 -save ./classifier_results/regen-50/topk-rwth-small-ReACGAN-ADC-DiffAug-highcond/ --num_workers 4 --epochs 50 --n_classes 13 --dims 64 --dset_used 50
#python src/classify.py --train_mode reggen --dset1 /mnt/sda2/datasets/rwth-small/ --dset2 ./classifier_results/real/rwth-small/rwth-small-ReACGAN-ADC-DiffAug-highcond/ --batch_size 10 -save ./classifier_results/regen-20/topk-rwth-small-ReACGAN-ADC-DiffAug-highcond/ --num_workers 4 --epochs 50 --n_classes 13 --dims 64 --dset_used 20

# Confusion matrix
#python src/classify.py -cm -lm ./classifier_results/real/hagrid-complete/model_state_dict.pt --dset1 /mnt/sda2/datasets/hagrid-complete/data/ --dset2 /mnt/sda2/datasets/hagrid-complete-ReACGAN-ADC-DiffAug-train-2022_10_28_03_00_38 -save ./classifier_results/real/hagrid-complete/ --batch_size 128 --num_workers 4 --n_classes 18 --dims 64